import{r as l,a as R,u as f,L as O,N,b as P,H as M,R as T,c as g}from"./vendor-BhC9yfQg.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var _={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A=l,U=Symbol.for("react.element"),H=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,$=A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function q(t,a,n){var s,r={},o=null,c=null;n!==void 0&&(o=""+n),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(c=a.ref);for(s in a)D.call(a,s)&&!B.hasOwnProperty(s)&&(r[s]=a[s]);if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:U,type:t,key:o,ref:c,props:r,_owner:$.current}}S.Fragment=H;S.jsx=q;S.jsxs=q;_.exports=S;var e=_.exports,C={},z=R;C.createRoot=z.createRoot,C.hydrateRoot=z.hydrateRoot;function x(){const t=localStorage.getItem("token"),a=f(),n=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a("/")};return e.jsxs("header",{className:"header",children:[e.jsx(O,{to:"/",className:"logo",children:"Quiz"}),e.jsxs("nav",{className:"navbar",children:[e.jsx(N,{to:"/",end:!0,className:({isActive:s})=>s?"active":"",children:"Home"}),e.jsx(N,{to:"/categories",className:({isActive:s})=>s?"active":"",children:"Categories"}),e.jsx(N,{to:"/leaderboard",className:({isActive:s})=>s?"active":"",children:"Leaderboard"}),t&&e.jsx(N,{to:"/scores",className:({isActive:s})=>s?"active":"",children:"My Scores"}),e.jsx(N,{to:"/about",className:({isActive:s})=>s?"active":"",children:"About"}),t?e.jsx("button",{className:"logout-button",onClick:n,children:"Logout"}):e.jsx(N,{to:"/login",className:({isActive:s})=>s?"active":"",children:"Login"})]})]})}function G(){const t=f(),a=()=>{t("/categories")};return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"home active",children:e.jsxs("div",{className:"home-content",children:[e.jsx("h1",{id:"heading",children:"Quiz Master"}),e.jsx("p",{id:"details",children:"Welcome to Quiz Master! Test your knowledge and challenge yourself."}),e.jsx("button",{className:"button",id:"startQuiz",onClick:a,children:"Start Quiz"})]})})})]})}function W(){const t=f(),[a,n]=l.useState(!1),s=c=>{localStorage.setItem("selectedCategory",c),n(!0)},r=()=>{n(!1)},o=()=>{t("/quiz")};return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"quiz-container",children:[e.jsxs("h1",{className:"fade-in",children:["Welcome to ",e.jsx("span",{children:"Quiz Master"})]}),e.jsx("p",{className:"sub-text",children:"Test your knowledge and challenge yourself!"}),e.jsxs("div",{className:"categories",children:[e.jsxs("div",{className:"category-card",onClick:()=>s("Science"),children:[e.jsx("div",{className:"category-icon",children:"🔬"}),e.jsx("h2",{children:"Science"})]}),e.jsxs("div",{className:"category-card",onClick:()=>s("History"),children:[e.jsx("div",{className:"category-icon",children:"🏛️"}),e.jsx("h2",{children:"History"})]}),e.jsxs("div",{className:"category-card",onClick:()=>s("Geography"),children:[e.jsx("div",{className:"category-icon",children:"🌍"}),e.jsx("h2",{children:"Geography"})]}),e.jsxs("div",{className:"category-card",onClick:()=>s("Sports"),children:[e.jsx("div",{className:"category-icon",children:"⚽"}),e.jsx("h2",{children:"Sports"})]}),e.jsxs("div",{className:"category-card",onClick:()=>s("Technology"),children:[e.jsx("div",{className:"category-icon",children:"💻"}),e.jsx("h2",{children:"Technology"})]}),e.jsxs("div",{className:"category-card",onClick:()=>s("Movies"),children:[e.jsx("div",{className:"category-icon",children:"🎬"}),e.jsx("h2",{children:"Movies"})]})]}),e.jsx("div",{className:"back-btn",children:e.jsx("button",{className:"btn back-btn",onClick:()=>t("/"),children:"Back to Home"})})]})}),a&&e.jsx("div",{id:"popup-overlay",className:"popup-overlay",style:{display:"flex"},children:e.jsxs("div",{className:"popup-content",children:[e.jsx("h2",{children:"Quiz Guide"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Read each question carefully."}),e.jsx("li",{children:"Select the correct answer."}),e.jsx("li",{children:"No negative marking."}),e.jsx("li",{children:"Good luck!"})]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{id:"exit-quiz",className:"popup-button",onClick:r,children:"Exit"}),e.jsx("button",{id:"continue-quiz",className:"popup-button",onClick:o,children:"Continue"})]})]})})]})}const F="https://verbally-measured-basilisk.ngrok-free.app".trim().replace(/\/$/,""),L=F,J=t=>{const a=t.trim().startsWith("/")?t.trim().slice(1):t.trim();return`${F}/${a}`.trim()},V={Science:17,History:23,Geography:22,Sports:21,Technology:18,Movies:11};function Y(){const[t,a]=l.useState([]),[n,s]=l.useState(0),[r,o]=l.useState(0),[c,h]=l.useState(null),[i,m]=l.useState([]),u=f();l.useEffect(()=>{v()},[]);async function v(){try{const d=localStorage.getItem("selectedCategory"),j=V[d];let k="https://opentdb.com/api.php?amount=10&type=multiple";j&&(k+=`&category=${j}`);const E=await(await fetch(k)).json();if(E.results.length===0){alert("No questions available for this category. Please try another category."),u("/categories");return}const w=E.results.map(b=>({question:b.question,correct:b.correct_answer,options:p([...b.incorrect_answers,b.correct_answer])}));a(w),w.length>0&&m(w[0].options)}catch(d){console.error("Error fetching questions:",d),alert("Failed to load questions. Please try again.")}}function p(d){return d.sort(()=>Math.random()-.5)}function y(d){c===null&&(h(d),d===t[n].correct&&o(j=>j+1))}async function I(){try{const d=localStorage.getItem("token");if(!d){console.log("User not logged in, score not saved");return}const j=localStorage.getItem("selectedCategory");if(!(await fetch(`${L}/api/scores`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({category:j,score:r,totalQuestions:t.length})})).ok)throw new Error("Failed to save score")}catch(d){console.error("Error saving score:",d)}}function Q(){n+1<t.length?(s(n+1),m(p([...t[n+1].options])),h(null)):(I(),u("/result",{state:{score:r,total:t.length}}))}return t.length===0?e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("p",{children:"Loading questions..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"quiz-section active",children:e.jsxs("div",{className:"quiz-box",children:[e.jsx("h2",{className:"question-text",dangerouslySetInnerHTML:{__html:t[n].question}}),e.jsx("div",{className:"option-list",children:i.map((d,j)=>e.jsx("div",{className:"option-item",onClick:()=>y(d),style:{backgroundColor:c?d===t[n].correct?"#90EE90":d===c?"#FFB6C1":"white":"white",pointerEvents:c?"none":"auto"},dangerouslySetInnerHTML:{__html:d}},j))}),e.jsxs("div",{className:"quiz-footer",children:[e.jsxs("span",{className:"question-progress",children:["Question ",n+1," of ",t.length]}),c&&e.jsx("button",{className:"next-button button",id:"nextBtn",onClick:Q,children:"Next Question"})]})]})})})]})}function K(){const{state:t}=P(),a=f(),{score:n,total:s}=t||{score:0,total:0};return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"result-section active",children:e.jsxs("div",{className:"result-box",children:[e.jsx("h2",{children:"Quiz Result!"}),e.jsxs("p",{className:"score-text",children:["Your Score: ",e.jsx("span",{id:"score",children:n}),"/",e.jsx("span",{id:"total-questions",children:s})]}),e.jsxs("div",{className:"result-buttons",children:[e.jsx("button",{className:"restart-button button",onClick:()=>window.location.reload(),children:"Restart Quiz"}),e.jsx("button",{className:"home-button button",onClick:()=>a("/"),children:"Home"})]})]})})})]})}function X(){return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"about-section active",children:e.jsxs("div",{className:"about-box",children:[e.jsx("h1",{children:"About Quiz Master"}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Welcome to Quiz Master!"}),e.jsx("p",{children:"Quiz Master is an interactive quiz application that allows you to test your knowledge across various categories. Challenge yourself with questions from Science, History, Geography, Sports, Technology, and Movies."})]}),e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Features"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multiple quiz categories"}),e.jsx("li",{children:"Track your scores"}),e.jsx("li",{children:"View your quiz history"}),e.jsx("li",{children:"User-friendly interface"})]})]}),e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Project Information"}),e.jsx("p",{children:"This project was developed as part of our Web Development course project. It demonstrates the implementation of a full-stack web application using:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"React.js for the frontend"}),e.jsx("li",{children:"Node.js and Express for the backend"}),e.jsx("li",{children:"MongoDB for data storage"}),e.jsx("li",{children:"Passport.js for authentication"})]})]})]})]})})})]})}function Z(){const[t,a]=l.useState({email:"",password:"",name:""}),[n,s]=l.useState(!1),[r,o]=l.useState(""),c=f(),h=async m=>{m.preventDefault(),o("");try{const u=n?"api/auth/signup":"api/auth/login",v=J(u);console.log("Debug Info:"),console.log("- API_URL:",L),console.log("- Endpoint:",u),console.log("- Final URL:",v);const p=await fetch(v,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:window.location.origin},credentials:"include",mode:"cors",body:JSON.stringify(t)}),y=await p.json();if(!p.ok)throw new Error(y.message||"Authentication failed");localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),c("/categories")}catch(u){console.error("Login error:",u),o(u.message||"Connection failed. Please try again.")}},i=m=>{const{name:u,value:v}=m.target;a(p=>({...p,[u]:v}))};return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"login-section active",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h2",{children:n?"Sign Up":"Login"}),r&&e.jsx("div",{className:"error-message",children:r}),e.jsxs("form",{onSubmit:h,className:"login-form",children:[n&&e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:t.name,onChange:i,required:n})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:i,required:!0})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:i,required:!0})}),e.jsx("button",{type:"submit",className:"button login-button",children:n?"Sign Up":"Login"})]}),e.jsxs("p",{className:"toggle-form",children:[n?"Already have an account?":"Don't have an account?"," ",e.jsx("span",{onClick:()=>s(!n),children:n?"Login":"Sign Up"})]})]})})})]})}function ee(){const[t,a]=l.useState([]),[n,s]=l.useState(!0),[r,o]=l.useState(""),c=f();l.useEffect(()=>{h()},[]);async function h(){try{const i=localStorage.getItem("token");if(!i){c("/login");return}const m=await fetch("http://localhost:5000/api/scores/my-scores",{headers:{Authorization:`Bearer ${i}`}});if(!m.ok)throw new Error("Failed to fetch scores");const u=await m.json();a(u)}catch(i){o("Failed to load scores. Please try again later."),console.error("Error fetching scores:",i)}finally{s(!1)}}return n?e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("div",{className:"scores-box",children:e.jsx("p",{children:"Loading scores..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"scores-section active",children:e.jsxs("div",{className:"scores-box",children:[e.jsx("h2",{children:"Your Quiz History"}),r&&e.jsx("div",{className:"error-message",children:r}),t.length===0?e.jsx("p",{children:"No quiz scores yet. Start playing to see your history!"}):e.jsx("div",{className:"scores-list",children:t.map(i=>e.jsxs("div",{className:"score-item",children:[e.jsxs("div",{className:"score-header",children:[e.jsx("h3",{children:i.category}),e.jsx("span",{className:"score-date",children:new Date(i.date).toLocaleDateString()})]}),e.jsxs("div",{className:"score-details",children:[e.jsxs("span",{className:"score-value",children:["Score: ",i.score,"/",i.totalQuestions]}),e.jsxs("span",{className:"score-percentage",children:[Math.round(i.score/i.totalQuestions*100),"%"]})]})]},i._id))})]})})})]})}function se(){const[t,a]=l.useState([]),[n,s]=l.useState(!0),[r,o]=l.useState("");l.useEffect(()=>{c()},[]);async function c(){try{const h=`${L.trim()}/api/scores/leaderboard`;console.log("Fetching leaderboard from:",h);const i=await fetch(h);if(!i.ok){const u=await i.json().catch(()=>({message:"Unknown error occurred"}));throw new Error(u.message||`Server responded with status ${i.status}`)}const m=await i.json();a(m),o("")}catch(h){o("Failed to load leaderboard. Please try again later."),console.error("Error fetching leaderboard:",h)}finally{s(!1)}}return n?e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("div",{className:"leaderboard-box",children:e.jsx("p",{children:"Loading leaderboard..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"leaderboard-section active",children:e.jsxs("div",{className:"leaderboard-box",children:[e.jsx("h2",{children:"Top Players"}),r&&e.jsx("div",{className:"error-message",children:r}),e.jsx("div",{className:"leaderboard-list",children:t.map((h,i)=>e.jsxs("div",{className:"leaderboard-item",children:[e.jsx("div",{className:"rank",children:i+1}),e.jsxs("div",{className:"player-info",children:[e.jsx("h3",{children:h.name||"Anonymous"}),e.jsx("span",{className:"email",children:h.email})]}),e.jsxs("div",{className:"player-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Quizzes Taken:"}),e.jsx("span",{className:"value",children:h.quizCount})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Average Score:"}),e.jsxs("span",{className:"value",children:[h.averageScore.toFixed(1),"%"]})]})]})]},h._id))})]})})})]})}function te(){return e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(g,{path:"/",element:e.jsx(G,{})}),e.jsx(g,{path:"/categories",element:e.jsx(W,{})}),e.jsx(g,{path:"/quiz",element:e.jsx(Y,{})}),e.jsx(g,{path:"/result",element:e.jsx(K,{})}),e.jsx(g,{path:"/about",element:e.jsx(X,{})}),e.jsx(g,{path:"/login",element:e.jsx(Z,{})}),e.jsx(g,{path:"/scores",element:e.jsx(ee,{})}),e.jsx(g,{path:"/leaderboard",element:e.jsx(se,{})})]})})}const re=C.createRoot(document.getElementById("root"));re.render(e.jsx(te,{}));
