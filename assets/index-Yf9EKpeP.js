import{r as l,a as R,L as O,N,u as v,b as P,H as M,R as T,c as p}from"./vendor-BhC9yfQg.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();var _={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A=l,U=Symbol.for("react.element"),H=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,$=A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function q(t,s,r){var o,a={},n=null,c=null;r!==void 0&&(n=""+r),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(c=s.ref);for(o in s)D.call(s,o)&&!B.hasOwnProperty(o)&&(a[o]=s[o]);if(t&&t.defaultProps)for(o in s=t.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:U,type:t,key:n,ref:c,props:a,_owner:$.current}}k.Fragment=H;k.jsx=q;k.jsxs=q;_.exports=k;var e=_.exports,E={},z=R;E.createRoot=z.createRoot,E.hydrateRoot=z.hydrateRoot;function m(){const t=localStorage.getItem("token");return e.jsxs("header",{className:"header",children:[e.jsx(O,{to:"/",className:"logo",children:"Quiz"}),e.jsxs("nav",{className:"navbar",children:[e.jsx(N,{to:"/",end:!0,className:({isActive:s})=>s?"active":"",children:"Home"}),e.jsx(N,{to:"/categories",className:({isActive:s})=>s?"active":"",children:"Categories"}),e.jsx(N,{to:"/leaderboard",className:({isActive:s})=>s?"active":"",children:"Leaderboard"}),t&&e.jsx(N,{to:"/scores",className:({isActive:s})=>s?"active":"",children:"My Scores"}),e.jsx(N,{to:"/about",className:({isActive:s})=>s?"active":"",children:"About"}),t?e.jsx("button",{className:"logout-button",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},children:"Logout"}):e.jsx(N,{to:"/login",className:({isActive:s})=>s?"active":"",children:"Login"})]})]})}function G(){const t=v(),s=()=>{t("/categories")};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"home active",children:e.jsxs("div",{className:"home-content",children:[e.jsx("h1",{id:"heading",children:"Quiz Master"}),e.jsx("p",{id:"details",children:"Welcome to Quiz Master! Test your knowledge and challenge yourself."}),e.jsx("button",{className:"button",id:"startQuiz",onClick:s,children:"Start Quiz"})]})})})]})}function W(){const t=v(),[s,r]=l.useState(!1),o=c=>{localStorage.setItem("selectedCategory",c),r(!0)},a=()=>{r(!1)},n=()=>{t("/quiz")};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"quiz-container",children:[e.jsxs("h1",{className:"fade-in",children:["Welcome to ",e.jsx("span",{children:"Quiz Master"})]}),e.jsx("p",{className:"sub-text",children:"Test your knowledge and challenge yourself!"}),e.jsxs("div",{className:"categories",children:[e.jsxs("div",{className:"category-card",onClick:()=>o("Science"),children:[e.jsx("div",{className:"category-icon",children:"ðŸ”¬"}),e.jsx("h2",{children:"Science"})]}),e.jsxs("div",{className:"category-card",onClick:()=>o("History"),children:[e.jsx("div",{className:"category-icon",children:"ðŸ›ï¸"}),e.jsx("h2",{children:"History"})]}),e.jsxs("div",{className:"category-card",onClick:()=>o("Geography"),children:[e.jsx("div",{className:"category-icon",children:"ðŸŒ"}),e.jsx("h2",{children:"Geography"})]}),e.jsxs("div",{className:"category-card",onClick:()=>o("Sports"),children:[e.jsx("div",{className:"category-icon",children:"âš½"}),e.jsx("h2",{children:"Sports"})]}),e.jsxs("div",{className:"category-card",onClick:()=>o("Technology"),children:[e.jsx("div",{className:"category-icon",children:"ðŸ’»"}),e.jsx("h2",{children:"Technology"})]}),e.jsxs("div",{className:"category-card",onClick:()=>o("Movies"),children:[e.jsx("div",{className:"category-icon",children:"ðŸŽ¬"}),e.jsx("h2",{children:"Movies"})]})]}),e.jsx("div",{className:"back-btn",children:e.jsx("button",{className:"btn back-btn",onClick:()=>t("/"),children:"Back to Home"})})]})}),s&&e.jsx("div",{id:"popup-overlay",className:"popup-overlay",style:{display:"flex"},children:e.jsxs("div",{className:"popup-content",children:[e.jsx("h2",{children:"Quiz Guide"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Read each question carefully."}),e.jsx("li",{children:"Select the correct answer."}),e.jsx("li",{children:"No negative marking."}),e.jsx("li",{children:"Good luck!"})]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{id:"exit-quiz",className:"popup-button",onClick:a,children:"Exit"}),e.jsx("button",{id:"continue-quiz",className:"popup-button",onClick:n,children:"Continue"})]})]})})]})}const F="https://verbally-measured-basilisk.ngrok-free.app".trim().replace(/\/$/,""),I=F,J=t=>{const s=t.trim().startsWith("/")?t.trim().slice(1):t.trim();return`${F}/${s}`.trim()},V=!1,Y={Science:17,History:23,Geography:22,Sports:21,Technology:18,Movies:11};function K(){const[t,s]=l.useState([]),[r,o]=l.useState(0),[a,n]=l.useState(0),[c,h]=l.useState(null),[i,x]=l.useState([]),u=v();l.useEffect(()=>{g()},[]);async function g(){try{const d=localStorage.getItem("selectedCategory"),j=Y[d];let w="https://opentdb.com/api.php?amount=10&type=multiple";j&&(w+=`&category=${j}`);const L=await(await fetch(w)).json();if(L.results.length===0){alert("No questions available for this category. Please try another category."),u("/categories");return}const C=L.results.map(S=>({question:S.question,correct:S.correct_answer,options:f([...S.incorrect_answers,S.correct_answer])}));s(C),C.length>0&&x(C[0].options)}catch(d){console.error("Error fetching questions:",d),alert("Failed to load questions. Please try again.")}}function f(d){return d.sort(()=>Math.random()-.5)}function b(d){c===null&&(h(d),d===t[r].correct&&n(j=>j+1))}async function y(){try{const d=localStorage.getItem("token");if(!d){console.log("User not logged in, score not saved");return}const j=localStorage.getItem("selectedCategory");if(!(await fetch(`${I}/api/scores`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({category:j,score:a,totalQuestions:t.length})})).ok)throw new Error("Failed to save score")}catch(d){console.error("Error saving score:",d)}}function Q(){r+1<t.length?(o(r+1),x(f([...t[r+1].options])),h(null)):(y(),u("/result",{state:{score:a,total:t.length}}))}return t.length===0?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("p",{children:"Loading questions..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"quiz-section active",children:e.jsxs("div",{className:"quiz-box",children:[e.jsx("h2",{className:"question-text",dangerouslySetInnerHTML:{__html:t[r].question}}),e.jsx("div",{className:"option-list",children:i.map((d,j)=>e.jsx("div",{className:"option-item",onClick:()=>b(d),style:{backgroundColor:c?d===t[r].correct?"#90EE90":d===c?"#FFB6C1":"white":"white",pointerEvents:c?"none":"auto"},dangerouslySetInnerHTML:{__html:d}},j))}),e.jsxs("div",{className:"quiz-footer",children:[e.jsxs("span",{className:"question-progress",children:["Question ",r+1," of ",t.length]}),c&&e.jsx("button",{className:"next-button button",id:"nextBtn",onClick:Q,children:"Next Question"})]})]})})})]})}function X(){const{state:t}=P(),s=v(),{score:r,total:o}=t||{score:0,total:0};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"result-section active",children:e.jsxs("div",{className:"result-box",children:[e.jsx("h2",{children:"Quiz Result!"}),e.jsxs("p",{className:"score-text",children:["Your Score: ",e.jsx("span",{id:"score",children:r}),"/",e.jsx("span",{id:"total-questions",children:o})]}),e.jsxs("div",{className:"result-buttons",children:[e.jsx("button",{className:"restart-button button",onClick:()=>window.location.reload(),children:"Restart Quiz"}),e.jsx("button",{className:"home-button button",onClick:()=>s("/"),children:"Home"})]})]})})})]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"about-section active",children:e.jsxs("div",{className:"about-box",children:[e.jsx("h1",{children:"About Quiz Master"}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Welcome to Quiz Master!"}),e.jsx("p",{children:"Quiz Master is an interactive quiz application that allows you to test your knowledge across various categories. Challenge yourself with questions from Science, History, Geography, Sports, Technology, and Movies."})]}),e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Features"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multiple quiz categories"}),e.jsx("li",{children:"Track your scores"}),e.jsx("li",{children:"View your quiz history"}),e.jsx("li",{children:"User-friendly interface"})]})]}),e.jsxs("div",{className:"about-item",children:[e.jsx("h2",{children:"Project Information"}),e.jsx("p",{children:"This project was developed as part of our Web Development course project. It demonstrates the implementation of a full-stack web application using:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"React.js for the frontend"}),e.jsx("li",{children:"Node.js and Express for the backend"}),e.jsx("li",{children:"MongoDB for data storage"}),e.jsx("li",{children:"Passport.js for authentication"})]})]})]})]})})})]})}function ee(){const[t,s]=l.useState({email:"",password:"",name:""}),[r,o]=l.useState(!1),[a,n]=l.useState(""),c=v(),h=async x=>{x.preventDefault(),n("");try{const u=r?"api/auth/signup":"api/auth/login",g=J(u);console.log("Debug Info:"),console.log("- API_URL:",I),console.log("- Endpoint:",u),console.log("- Final URL:",g);const f={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)},b=await fetch(g,f),y=await b.json();if(!b.ok)throw new Error(y.message||"Authentication failed");localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),c("/categories")}catch(u){console.error("Login error:",u),n(u.message||"Connection failed. Please try again.")}},i=x=>{const{name:u,value:g}=x.target;s(f=>({...f,[u]:g}))};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"login-section active",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h2",{children:r?"Sign Up":"Login"}),a&&e.jsx("div",{className:"error-message",children:a}),e.jsxs("form",{onSubmit:h,className:"login-form",children:[r&&e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:t.name,onChange:i,required:r})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:i,required:!0})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:i,required:!0})}),e.jsx("button",{type:"submit",className:"button login-button",children:r?"Sign Up":"Login"})]}),e.jsxs("p",{className:"toggle-form",children:[r?"Already have an account?":"Don't have an account?"," ",e.jsx("span",{onClick:()=>o(!r),children:r?"Login":"Sign Up"})]})]})})})]})}function se(){const[t,s]=l.useState([]),[r,o]=l.useState(!0),[a,n]=l.useState(""),c=v();l.useEffect(()=>{h()},[]);async function h(){try{const i=localStorage.getItem("token");if(!i){c("/login");return}const x=await fetch("http://localhost:5000/api/scores/my-scores",{headers:{Authorization:`Bearer ${i}`}});if(!x.ok)throw new Error("Failed to fetch scores");const u=await x.json();s(u)}catch(i){n("Failed to load scores. Please try again later."),console.error("Error fetching scores:",i)}finally{o(!1)}}return r?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("div",{className:"scores-box",children:e.jsx("p",{children:"Loading scores..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"scores-section active",children:e.jsxs("div",{className:"scores-box",children:[e.jsx("h2",{children:"Your Quiz History"}),a&&e.jsx("div",{className:"error-message",children:a}),t.length===0?e.jsx("p",{children:"No quiz scores yet. Start playing to see your history!"}):e.jsx("div",{className:"scores-list",children:t.map(i=>e.jsxs("div",{className:"score-item",children:[e.jsxs("div",{className:"score-header",children:[e.jsx("h3",{children:i.category}),e.jsx("span",{className:"score-date",children:new Date(i.date).toLocaleDateString()})]}),e.jsxs("div",{className:"score-details",children:[e.jsxs("span",{className:"score-value",children:["Score: ",i.score,"/",i.totalQuestions]}),e.jsxs("span",{className:"score-percentage",children:[Math.round(i.score/i.totalQuestions*100),"%"]})]})]},i._id))})]})})})]})}function te(){const[t,s]=l.useState([]),[r,o]=l.useState(!0),[a,n]=l.useState("");l.useEffect(()=>{c()},[]);async function c(){try{const h=await fetch("http://localhost:5000/api/scores/leaderboard");if(!h.ok)throw new Error("Failed to fetch leaderboard");const i=await h.json();s(i)}catch(h){n("Failed to load leaderboard. Please try again later."),console.error("Error fetching leaderboard:",h)}finally{o(!1)}}return r?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("div",{className:"leaderboard-box",children:e.jsx("p",{children:"Loading leaderboard..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("main",{className:"main",children:e.jsx("section",{className:"leaderboard-section active",children:e.jsxs("div",{className:"leaderboard-box",children:[e.jsx("h2",{children:"Top Players"}),a&&e.jsx("div",{className:"error-message",children:a}),e.jsx("div",{className:"leaderboard-list",children:t.map((h,i)=>e.jsxs("div",{className:"leaderboard-item",children:[e.jsx("div",{className:"rank",children:i+1}),e.jsxs("div",{className:"player-info",children:[e.jsx("h3",{children:h.name||"Anonymous"}),e.jsx("span",{className:"email",children:h.email})]}),e.jsxs("div",{className:"player-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Quizzes Taken:"}),e.jsx("span",{className:"value",children:h.quizCount})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Average Score:"}),e.jsxs("span",{className:"value",children:[h.averageScore.toFixed(1),"%"]})]})]})]},h._id))})]})})})]})}function ae(){return e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(p,{path:"/",element:e.jsx(G,{})}),e.jsx(p,{path:"/categories",element:e.jsx(W,{})}),e.jsx(p,{path:"/quiz",element:e.jsx(K,{})}),e.jsx(p,{path:"/result",element:e.jsx(X,{})}),e.jsx(p,{path:"/about",element:e.jsx(Z,{})}),e.jsx(p,{path:"/login",element:e.jsx(ee,{})}),e.jsx(p,{path:"/scores",element:e.jsx(se,{})}),e.jsx(p,{path:"/leaderboard",element:e.jsx(te,{})})]})})}const re=E.createRoot(document.getElementById("root"));re.render(e.jsx(ae,{}));
